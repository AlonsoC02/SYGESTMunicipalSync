
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Login.cshtml";
}

<div class="page-header header-filter">

    <div class="container">
        <div class="row">
            <div class="col-md-3 col-md-6 ml-auto mr-auto">
                <div class="card card-login">

                    <br />

                    <div class="card-header card-header-primary text-center">
                        <h4 class="card-title">Login</h4>
                    </div>
                    <h5 class="text-center">
                        <a class="description text-center" asp-area="Admin" asp-controller="Registro" asp-action="Create">¡Primero debes Registrarte! </a>
                    </h5>
                   
                   
                    <div class="row">
                        <div class="card-body">

                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="material-icons">mail</i>
                                    </span>
                                </div>
                                <input type="text" id="name" value="" class="form-control" onblur="checkInput(this)" placeholder="Nombre de Usuario..." />


                            </div>

                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="material-icons">lock_outline</i>
                                    </span>
                                </div>
                                <input type="password" id="password" value="" class="form-control" onblur="checkInput(this)" placeholder="Contraseña...">

                            </div>

                        </div>
                    </div>


                    <br />
                    <br />
                    <div class="form-group row">

                    </div>
                    <div class="card-body">
                        <div class="footer text-center">


                            <div class="form-group">

                            </div>
                            <div class="form-group row">

                            </div>
                            <div class="form-group ">
                                <button type="submit" class="btn btn-primary" value="Ingresar" onclick="Enviar()">Iniciar Sesión</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        
    </div>
</div>


<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/js/sweetalert2.js"></script>
<script src="~/js/Utilitarios.js"></script>
<script  type="text/javascript">

    function Enviar() {
        var user = document.getElementById("name").value;
        var pass = document.getElementById("password").value;
        $.ajax({
            type: "GET",
            url: "/Admin/Login/_Login",
            data: { "user": user, "pass": pass },
            success: function (data) {
                if (data == "") {
                    error("Usuario o contaseña incorrecto!");
                } else {
                    correcto("Bienvenido!")
                    document.location.href = "/Home/Home/Index"
                }
            },
            error: "Esta mierda no sirve"
        })
    };

    var button = document.getElementById('mainButton');

   

    var checkInput = function (input) {
        if (input.value.length > 0) {
            input.className = 'active';
        } else {
            input.className = '';
        }
    };

    var closeForm = function () {
        button.className = '';
    };

    document.addEventListener("keyup", function (e) {
        if (e.keyCode == 27 || e.keyCode == 13) {
            closeForm();
        }
    });


</script>